<mat-card class="photo-card">
  <mat-card-header>
    <mat-card-title>Profile Picture</mat-card-title>
    </mat-card-header>
  <mat-card-content>
    <div *ngIf="isLoading" class="loading-state">
      <mat-spinner diameter="30"></mat-spinner>
      <p>Loading photo...</p>
    </div>
    <div *ngIf="!isLoading" class="photo-container">
      <div class="image-preview-section">
        <!-- <p class="section-title">Image preview</p> -->
        <div class="image-preview-box">
          <img *ngIf="imagePreviewUrl; else defaultUserIcon" [src]="imagePreviewUrl" alt="" class="profile-image">
          <ng-template #defaultUserIcon>
            <mat-icon class="default-icon">person</mat-icon>
          </ng-template>
        </div>
      </div>

      <div class="upload-section">
        <p class="section-title">Add / Change Image</p>
        
        <div class="file-selection-row">
          <input type="file" #fileInput (change)="onFileSelected($event)" accept="image/*" style="display: none;">
          <span class="file-name">{{ selectedFile ? selectedFile.name : 'No file selected...' }}</span>
          <button mat-flat-button color="accent" (click)="fileInput.click()" [disabled]="isUploading" class="select-image-button">
            Select
          </button>
        </div>
        
        <div class="upload-button-row">
            <button mat-flat-button color="primary" (click)="uploadImage()" [disabled]="!selectedFile || isUploading">
                <mat-icon *ngIf="isUploading" class="spinner-icon">
                    <mat-spinner diameter="20"></mat-spinner>
                </mat-icon>
                <span *ngIf="!isUploading">Upload</span>
                <span *ngIf="isUploading">Uploading...</span>
            </button>
        </div>
        
        <!-- <div class="remove-button-row">
            <button mat-button color="warn" (click)="removeImage()" [disabled]="!userPhoto.photoURL && !selectedFile" class="remove-image-button">
                Remove image
            </button> 
        </div> -->
      </div>
    </div>
  </mat-card-content>
</mat-card>